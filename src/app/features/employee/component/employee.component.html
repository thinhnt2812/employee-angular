<div class="employee">
  <div class="employee_title">
    <h1>Danh sách nhân viên</h1>
  </div>

  <div class="employee_search">
    <input 
      class="search_inp" 
      type="text" 
      [(ngModel)]="searchKeyword" 
      (ngModelChange)="onSearch()" 
      placeholder="Tìm kiếm nhân viên theo tên..." 
    />
  </div>

  <div class="employee_table">
    <ul class="employee_info">
      <li (click)="sortEmployeesByIdDesc()">Mã NV <i class="fa fa-sort"></i></li>
      <li (click)="sortEmployeesBy('name')">Họ Và Tên <i class="fa fa-sort"></i></li>
      <li (click)="sortEmployeesBy('gender')">Giới Tính <i class="fa fa-sort"></i></li>
      <li (click)="sortEmployeesBy('phone')">Số Điện Thoại <i class="fa fa-sort"></i></li>
      <li (click)="sortEmployeesBy('hometown')">Quê Quán <i class="fa fa-sort"></i></li>
      <li (click)="sortEmployeesByDobYear()">Ngày Sinh <i class="fa fa-sort"></i></li>
      <li (click)="sortEmployeesBy('employeeType')">Chức Vụ <i class="fa fa-sort"></i></li>
      <li (click)="sortEmployeesBy('workStatus')">Trạng Thái <i class="fa fa-sort"></i></li>
      <li>Hành Động</li>
    </ul>
    
    <ul class="employee_lists" *ngFor="let employee of employeeList; trackBy: trackById">
      <li class="employee_list">{{ employee.id }}</li>
      <li class="employee_list">{{ employee.name }}</li>
      <li class="employee_list">{{ employee.gender }}</li>
      <li class="employee_list">{{ employee.phone }}</li>
      <li class="employee_list">{{ employee.hometown }}</li>
      <li class="employee_list">{{ employee.dob | date:'dd/MM/yyyy' }}</li>
      <li class="employee_list">{{ employee.employeeType }}</li>
      <li class="employee_list">{{ employee.workStatus }}</li>
      <li class="employee_list">
        <div class="dropdown">
          <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
            <i class="fa-solid fa-gears"></i>
          </button>
          <ul class="dropdown-menu">
            <li><button class="dropdown-item employee_btn" (click)="onEdit(employee)">Sửa</button></li>
            <li><button class="dropdown-item employee_btn" (click)="onDelete(employee.id)">Xóa</button></li>
          </ul>
        </div>
      </li>
    </ul>
  </div>

  <div class="pagination">
    <button (click)="goToFirstPage()" [disabled]="currentPage === 1" [class.disabled]="currentPage === 1"><<</button>
    <button (click)="goToPreviousPage()" [disabled]="currentPage === 1" [class.disabled]="currentPage === 1"><</button>
    <span>{{ (currentPage - 1) * itemsPerPage + 1 }} - {{ currentPage * itemsPerPage > totalItems ? totalItems : currentPage * itemsPerPage }} / {{ totalItems }}</span>
    <button (click)="goToNextPage()" [disabled]="currentPage * itemsPerPage >= totalItems" [class.disabled]="currentPage * itemsPerPage >= totalItems">></button>
    <button (click)="goToLastPage()" [disabled]="currentPage * itemsPerPage >= totalItems" [class.disabled]="currentPage * itemsPerPage >= totalItems">>></button>
  </div>

  <div class="employee_form">
    <input class="employee_inp" [(ngModel)]="currentEmployee.id" placeholder="Mã Nhân Viên" disabled/>
    <input class="employee_inp" [(ngModel)]="currentEmployee.name" placeholder="Họ Và Tên" required/>
    
    <select class="employee_inp" [(ngModel)]="currentEmployee.gender" required>
      <option value="">Chọn giới tính</option>
      <option value="Nam">Nam</option>
      <option value="Nữ">Nữ</option>
      <option value="Khác">Khác</option>
    </select>
    
    <input class="employee_inp" [(ngModel)]="currentEmployee.phone" placeholder="Số Điện Thoại" required/>
    
    <select class="employee_inp" [(ngModel)]="currentEmployee.hometown" required>
      <option value="">Chọn quê quán</option>
      <option *ngFor="let city of hometowns" [value]="city">{{ city }}</option>
    </select>
    
    <input class="employee_inp" [(ngModel)]="currentEmployee.dob" placeholder="Ngày Sinh" type="date" required/>
    
    <select class="employee_inp" [(ngModel)]="currentEmployee.employeeType" required>
      <option value="">Chức vụ</option>
      <option value="Trưởng phòng">Trưởng phòng</option>
      <option value="Kế toán">Kế toán</option>
      <option value="Nhân viên">Nhân viên</option>
    </select>
    
    <select class="employee_inp" [(ngModel)]="currentEmployee.workStatus" required>
      <option value="">Trạng thái</option>
      <option value="Đang làm">Đang làm</option>
      <option value="Đã nghỉ">Đã nghỉ</option>
    </select>
    
    <button class="employee_form_btn" (click)="onAddOrUpdate()">{{ editMode ? 'Lưu' : 'Lưu' }}</button>
  </div>
</div>
